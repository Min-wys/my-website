---
sidebar_position: 1
---

## 定义函数的几种方式

1. 函数表达式
2. 函数式声明
3. 箭头函数
4. 函数的构造器（new Function）

## 构造函数的目地

1. 构造函数的目的是创建一个新对象，并进行初始化设置，然后将其作为构造函数的返回值。任何有悖于这两点的情况都 

   不适合作为构造函数。 

## 函数参数默认值

- ES6 允许为函数的参数设置默认值，即直接写在参数定义的后面。只有值是undefined时才会触发函数的参数默认值，null不会触发

  - ```js
    function foo(x, y = 'World') {
      console.log(x, y);
    }
    
    foo('Hello') // Hello World
    foo('Hello', 'China') // Hello China
    foo('Hello', '') // Hello
    ```

- 与解构赋值默认值结合使用

  - 与解构赋值一起使用使用，一定要传值，不传值会报错

  - ```js
    function foo({x, y = 5}) {
      console.log(x, y);
    }
    
    foo({}) // undefined 5
    foo({x: 1}) // 1 5
    foo({x: 1, y: 2}) // 1 2
    foo() // TypeError: Cannot read property 'x' of undefined
    ```

  - 可以给解构赋值一个默认值

  - ```js
    function foo({x, y = 5} = {}) { // 双重默认值
      console.log(x, y);
    }
    foo() // 不会报错
    ```

  - 作为练习，请问下面两种写法有什么差别？

    ```javascript
    // 写法一
    function m1({x = 0, y = 0} = {}) {
      return [x, y];
    }
    
    // 写法二
    function m2({x, y} = { x: 0, y: 0 }) {
      return [x, y];
    }
    ```

    上面两种写法都对函数的参数设定了默认值，区别是写法一函数参数的默认值是空对象，但是设置了对象解构赋值的默认值；写法二函数参数的默认值是一个有具体属性的对象，但是没有设置对象解构赋值的默认值。

    ```javascript
    // 函数没有参数的情况
    m1() // [0, 0]
    m2() // [0, 0]
    
    // x 和 y 都有值的情况
    m1({x: 3, y: 8}) // [3, 8]
    m2({x: 3, y: 8}) // [3, 8]
    
    // x 有值，y 无值的情况
    m1({x: 3}) // [3, 0]
    m2({x: 3}) // [3, undefined]
    
    // x 和 y 都无值的情况
    m1({}) // [0, 0];
    m2({}) // [undefined, undefined]
    
    m1({z: 3}) // [0, 0]
    m2({z: 3}) // [undefined, undefined]
    ```

## 函数的length属性

- 指定了默认值以后，函数的`length`属性，将返回没有指定默认值的参数个数。也就是说，指定了默认值后，`length`属性将失真。

- ```js
  (function (a) {}).length // 1
  (function (a = 5) {}).length // 0
  (function (a, b, c = 5) {}).length // 2
  ```

- 上面代码中，`length`属性的返回值，等于函数的参数个数减去指定了默认值的参数个数。比如，上面最后一个函数，定义了 3 个参数，其中有一个参数`c`指定了默认值，因此`length`属性等于`3`减去`1`，最后得到`2`。

- 这是因为`length`属性的含义是，该函数预期传入的参数个数。某个参数指定默认值以后，预期传入的参数个数就不包括这个参数了。同理，后文的 rest 参数也不会计入`length`属性。

- ```js
  (function(...args) {}).length // 0
  ```

- 如果设置了默认值的参数不是尾参数，那么`length`属性也不再计入后面的参数了。

- ```js
  (function (a = 0, b, c) {}).length // 0
  (function (a, b = 1, c) {}).length // 1
  ```

## 函数参数

• 函数参数为基本数据类型时 函数内复制了一份参数值，任何操作都不会影响原参数际值

• 函数参数是引用类型时，当在函数体内修改这个值的某个属性值时，将会对原来的参数进行修改

• 函数参数是引用类型时， 如果直接修改这个值的引用地址，则相应在函数体内新创建了一个引用， 何操作都不会影响原参数实际值