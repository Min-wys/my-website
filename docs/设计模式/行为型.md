## 单例模式

- 定义

  - 单例模式也称为单体模式，规定一个类只有一个实例，并且提供可全局访问点；

- 实现

  - JavaScript中没有类的定义，单例模式的特点是”唯一“和”全局访问“，那么我们可以联想到JavaScript中的全局对象，利用ES6的let不允许重复声明的特性，刚好符合这两个特点；是的，全局对象是最简单的单例模式；

    ```JS
    let obj = {
        name:"咸鱼",
        getName:function(){}
    }
    // 污染命名空间（容易变量名冲突）维护时不容易管控 (搞不好就直接覆盖了)
    ```

  - 简单版单例模式（只能有一个实例，所以我们需要使用if分支来判断，如果已经存在就直接返回，如果不存在就新建一个实例）

    ```JS
    function Singleton(name){
        this.name = name
        this.instance = null
    }
    Singleton.getInstance = function(name){
        if(!this.instance){
            this.instance = new Singleton(name)
        }
        return this.instance
    }
    var a= Singleton.getInstance('a')
    var b= Singleton.getInstance('b')
    console.log(a===b)  // true
    ```

  - ES6模式

    ```JS
    // 创建一个类
    class SingleObject{
        login(){
            console.log('login')
        }
    }
    // 定义类的方法，作用是返回SingleObject的实例对象
    SingleObject.getInstance = (function(){
        // 定义一个实例变量
        let instance;
        return function(){
            // 如果不存在实例对象，就创建一个实例对象
            if(!instance){
                instance = new SingleObject()
            }
            return instance
        }
    })()
    // test
    let obj1 = SingleObject.getInstance()
    obj1.login() // login
    let obj2 = SingleObject.getInstance()
    obj2.login() // login
    console.log(obj1 === obj2) // true
    ```

    